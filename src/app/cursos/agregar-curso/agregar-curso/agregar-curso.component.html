<div class="container" *ngIf="vm$ | async as vm">
    <h3 class="mt-3">
        <h1>{{cursoId > 0 ? 'Editar':'Agregar'}} Curso</h1>
    </h3>

    <div class="row">
        <div class="col">
            <form [formGroup]="formulario" (ngSubmit)="guardar()">
                <div class="mb-3">
                    <label for="categoria">Categoría</label>
                    <select class="form-select" aria-label="Default select example" id="categoria" name="categoria"
                        formControlName="categoriaId">
                        <option [value]="0">---Seleccionar Categor&iacute;a---</option>

                        <option [value]="categoria.id" *ngFor="let categoria of categorias$ | async">
                            {{ categoria.nombre }}
                        </option>
                    </select>

                    <ng-container *ngIf="categoria.invalid && categoria.touched">
                        <div class="text-danger" *ngIf="categoria.errors?.['required']">
                            La categoría es requerida.
                        </div>
                        <div class="text-danger" *ngIf="categoria.errors?.['min']">
                            Es necesario seleccionar una categoría
                        </div>
                    </ng-container>
                </div>

                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre</label>

                    <input type="text" class="form-control" id="nombre" placeholder="Nombre" name="nombre"
                        formControlName="nombre" />

                    <ng-container *ngIf="nombre.invalid && nombre.touched">
                        <div class="text-danger" *ngIf="nombre.errors?.['required']">
                            El nombre es requerido.
                        </div>

                        <div class="text-danger" *ngIf="nombre.errors?.['minlength']">
                            El nombre del producto tiene que ser mayor o igual a 5 caracteres.
                        </div>
                    </ng-container>
                </div>

                <div class="mb-3">
                    <label for="precio" class="form-label">Precio</label>

                    <input type="number" class="form-control" id="precio" placeholder="Precio" name="precio"
                        formControlName="precio" />

                    <ng-container *ngIf="precio.invalid && precio.touched">
                        <div class="text-danger" *ngIf="precio.errors?.['required']">
                            El precio es requerido.
                        </div>

                        <div class="text-danger" *ngIf="precio.errors?.['min']">
                            El precio debe ser mayor a 100.
                        </div>
                    </ng-container>
                </div>

                <div class="mb-3">
                    <button class="btn btn-primary" type="submit">{{cursoId > 0 ? 'Actualizar':'Agregar'}}
                        Curso</button>
                    <button class="btn btn-secondary ms-3" routerLink="">Regresar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="alert alert-danger" *ngIf="mensajeError$ | async as mensajeError">
    {{ mensajeError }}
</div>